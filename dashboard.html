<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SplitSmart</title>
    <link rel="stylesheet" href="css sheets/homepage.css">
</head>

<body>

    <header>

            <h1 class="title">SplitSmart</h1>
            <nav class="siteNav">

                    <!--account page will ask for profile information-->
                    <a href="accountpage.html">Account</a>
                    <a href="dashboard.html">Dashboard</a>
                    <a href="#">Log Out</a>

            </nav>

    </header>

    <div class="dashboard-page">

        <div class="container-dash">
            <div class="feature-dash">

                <!--balance (updates when new payments made)-->
                <div class="balance">
                    <p> Current Balance: <span id="currentBalance">0</span></p>
                </div>

                            <!-- REPORT FEATURE -->

            <div class="popup" id="popup-1">
                <div class="overlay"></div>
                <div class="content">
                    <div class="close-btn" onclick="togglePopup()">&times;</div>
                    <h1>Customer Report</h1>
                    <p>View all expense report.</p>
                    <button onclick="togglePopup2()" class="popup-btn">General Report</button>
                    <button onclick="togglePopup3()" class="popup-btn">Custom Report</button>
                </div>
            </div>

            <div class="popup" id="popup-2">
                <div class="overlay"></div>
                <div class="content">
                    <div class="close-btn" onclick="togglePopup2()">&times;</div>
                    <h1>General Report</h1>
                    <!-- add general report -->
                </div>
            </div>

            <div class="popup" id="popup-3">
                <div class="overlay"></div>
                <div class="content">
                    <div class="close-btn" onclick="togglePopup3()">&times;</div>
                    <h1>Custom Report</h1>
                    <!-- add custom report -->
                </div>
            </div>

            <div class="call-out">
                <button onclick="togglePopup()" class="popup-btn">Generate Report</button>
            </div>
            <!-- end of report feature -->


                <!--create new group feature ( allow them to name the grouo and add members - new page when the click on the button)--->
                <div class="group">
                    <p>Create New Group</p>


                </div>

                <!-- similar to create a new group (popup window to invite friends - ask for email, name and invite button)-->
                <div class="friends">
                    <p>Invite Friends</p>
                </div>





            </div>


            <div class="feature-dash">

                <!--create an  expense section (expenses need to have the description, amouont, date, person sent to , and optional image and split%)-->

                <h2>Expense Mangagement</h2>
                <form id="expenseForm">
                    <div class="form-field">
                        <label for="amount" class="label-form">Amount:</label>
                        <input type="number" id="amount" required placeholder="Amount">
                    </div>
                
                    <div class="form-field">
                        <label for="person" class="label-form">Sent to:</label>
                        <input type="text" id="person" name="person" required placeholder="Sent to">
                    </div>
                
                    <div class="form-field">
                        <label for="date">Date:</label>
                        <input type="date" id="date" required>
                    </div>
                
                    <div class="form-field">
                        <label for="description" class="label-form">Description:</label>
                        <input type="text" id="description" name="description" required placeholder="Description">
                    </div>
                
                    <input type="submit" name="submit" id="submit">
                </form>
                
                <!--display expenses and approval status optional? -->
                <div id="expenseList"></div>
                </div>
        </div>
    </div>

    <!-- JavaScript to update the balance value -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Retrieve the balance value from local storage (you should replace "balanceValue" with the key used to store the balance)
            const balanceValue = localStorage.getItem("balanceValue");

            // Update the HTML element with the current balance value
            const currentBalanceElement = document.getElementById("currentBalance");
            if (currentBalanceElement && balanceValue !== null) {
                currentBalanceElement.textContent = balanceValue;
            }
        });
    </script>

    <script type="text/javascript">

        //report popup function
        function togglePopup(){
            document.getElementById("popup-1").classList.toggle("active");
        }

        function togglePopup2(){
            document.getElementById("popup-2").classList.toggle("active");
        }
        function togglePopup3(){
            document.getElementById("popup-3").classList.toggle("active");
        }


         const expenses = [];

        document.getElementById('expenseForm').addEventListener('submit', function (event) {
        event.preventDefault();

        const amount = parseFloat(document.getElementById('amount').value);
        const person = document.getElementById('person').value;
        const date = document.getElementById('date').value;
        const description = document.getElementById('description').value;

        expenses.push({
            amount,
            person,
            date,
            description
        });

        document.getElementById('expenseForm').reset();

        displayExpenses();
    });

    function displayExpenses() {
        const expenseList = document.getElementById('expenseList');
        expenseList.innerHTML = '';

        expenses.forEach((expense) => {
            const expenseItem = document.createElement('div');
            expenseItem.innerHTML = `
                <p>Amount: $${expense.amount}</p>
                <p>Sent to: ${expense.person}</p>
                <p>Date: ${expense.date}</p>
                <p>Description: ${expense.description}</p>
                <p>Approval Status: Pending</p>
                <hr>
            `;

            expenseList.appendChild(expenseItem);
        });
    }

    </script>


</body>
</html>